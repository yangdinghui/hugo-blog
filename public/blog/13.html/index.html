<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Hugo 0.135.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="toTop" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="halo" />
<meta property="og:url" content="http://halo.rebotgpt.top/blog/13.html/" />
<link rel="canonical" href="http://halo.rebotgpt.top/blog/13.html/" /><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/yangdinghui/Code-Guide/master/pic/icons-cat.gif" />
<link rel="icon" href="https://raw.githubusercontent.com/yangdinghui/Code-Guide/master/pic/icons-cat.gif" />
<link rel="shortcut" href="https://raw.githubusercontent.com/yangdinghui/Code-Guide/master/pic/icons-cat.gif" /><link rel="alternate" type="application/atom+xml" href="http://halo.rebotgpt.top/index.xml" title="halo的博客">
<script type="application/ld+json">
{
"@context" : "http://schema.org",
"@type" : "BlogPosting",
"mainEntityOfPage": {
"@type": "WebPage",
"@id": "http:\/\/halo.rebotgpt.top\/"
},
"articleSection" : "blog",
"name" : "rocketmq源码编译记录",
"headline" : "rocketmq源码编译记录",
"description" : "前置准备工具 JDK1.8\u002b Maven 3.2\u002b 编译工具idea 1.获取源码并导入idea git clone https:\/\/github.com\/apache\/rocketmq.git 2.文件修改 2.1.在根目录下创建目录conf 2.2.将项目中distribution工程中的conf目录下的文件broker.conf复制到根目录下conf中 2.3.修改内容，如 brokerClusterName = DefaultCluster brokerName = broker-a brokerId = 0 deleteWhen = 04 fileReservedTime = 48 brokerRole = ASYNC_MASTER flushDiskType = ASYNC_FLUSH # 自动创建Topic autoCreateTopicEnable=true # nameServ地址 namesrvAddr=localhost:9876 # 存储路径 storePathRootDir=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store #CommitLog存储路径 storePathCommitLog=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store\/commitlog # 消费队列存储路径 storePathConsumeQueue=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store\/consumequeue # 消息索引存储路径 storePathIndex=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store\/index #checkpoint文件存储路径 storeCheckpoint\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store\/checkpoint #abort文件存储路径 abortFile=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\/store\/abort 3.编译,运行以下命令 mvn clean install -Dmaven.test.skip=true 等待命令执行完成。\n4.编译安装完成后，观察项目各种jar包是否正确导入 若有包未正确导入，可从本地删掉该jar，刷新maven重新下载\n5.执行org.apache.rocketmq.namesrv.NamesrvStartup 5.1增加启动配置 ROCKETMQ_HOME=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq 若还报错\nPlease set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在NamesrvStartup.java中main方法第一行增加\nSystem.setProperty(\u0026#34;rocketmq.home.dir\u0026#34;, \u0026#34;\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\u0026#34;); 5.2执行成功 The Name Server boot success. serializeType=JSON, address 0.0.0.0:9876 6.执行org.apache.rocketmq.broker.BrokerStartup 6.1增加启动配置 ROCKETMQ_HOME=\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq 若还报错\nPlease set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在BrokerStartup.java中main方法第一行增加\nSystem.setProperty(\u0026#34;rocketmq.home.dir\u0026#34;, \u0026#34;\/Users\/tomato\/IdeaProjects\/learn\/sourcecode\/rocketmq\u0026#34;); 6.2执行成功 The broker[broker-a, 172.17.54.155:10911] boot success. serializeType=JSON and name server is localhost:9876 7.执行org.apache.rocketmq.example.quickstart.Producer 7.1 先修改Producer前将该注释打开 producer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 7.2 运行main方法,执行成功会有以下输出 SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C803DE, offsetMsgId=AC11369B00002A9F00000000000B0752, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=746] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903DF, offsetMsgId=AC11369B00002A9F00000000000B0844, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E0, offsetMsgId=AC11369B00002A9F00000000000B0936, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E1, offsetMsgId=AC11369B00002A9F00000000000B0A28, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E2, offsetMsgId=AC11369B00002A9F00000000000B0B1A, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E3, offsetMsgId=AC11369B00002A9F00000000000B0C0C, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E4, offsetMsgId=AC11369B00002A9F00000000000B0CFE, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=749] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E5, offsetMsgId=AC11369B00002A9F00000000000B0DF0, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E6, offsetMsgId=AC11369B00002A9F00000000000B0EE2, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CC03E7, offsetMsgId=AC11369B00002A9F00000000000B0FD4, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=749] 8.执行org.apache.rocketmq.example.quickstart.Consumer 8.1 先修改Consumer类前将该注释打开 consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 8.2 运行main方法,执行成功会有以下输出 ConsumeMessageThread_please_rename_unique_group_name_4_16 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=490, sysFlag=0, bornTimestamp=1709025389853, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389853, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000073BF8, commitLogOffset=474104, bodyCRC=910391900, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491D03C0, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 54, 50], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_13 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=485, sysFlag=0, bornTimestamp=1709025389842, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389842, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000072910, commitLogOffset=469264, bodyCRC=74782942, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491203AC, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 52, 50], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_3 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=481, sysFlag=0, bornTimestamp=1709025389831, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389832, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F00000000000719F0, commitLogOffset=465392, bodyCRC=1430420289, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A4907039C, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 54], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_20 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=480, sysFlag=0, bornTimestamp=1709025389825, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389825, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000071628, commitLogOffset=464424, bodyCRC=1378860888, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A49010398, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 50], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_15 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=476, sysFlag=0, bornTimestamp=1709025389807, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389807, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070708, commitLogOffset=460552, bodyCRC=1735662019, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EF0388, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 54], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_14 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=475, sysFlag=0, bornTimestamp=1709025389803, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389803, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070340, commitLogOffset=459584, bodyCRC=1612307930, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EB0384, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 50], transactionId=\u0026#39;null\u0026#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_6 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=474, sysFlag=0, bornTimestamp=1709025389775, bornHost=\/172.17.54.155:56940, storeTimestamp=1709025389780, storeHost=\/172.17.54.155:10911, msgId=AC11369B00002A9F000000000006FF78, commitLogOffset=458616, bodyCRC=1355605434, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=\u0026#39;TopicTest\u0026#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48CF0380, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 56, 57, 56], transactionId=\u0026#39;null\u0026#39;}]] 9.编译完成，接下来就可以愉快的调试源码了！ 注：上面提到的目录需要根据本地环境调整！！！",
"inLanguage" : "en-US",
"author" : "halo",
"creator" : "halo",
"publisher": "halo",
"accountablePerson" : "halo",
"copyrightHolder" : "halo",
"copyrightYear" : "2024",
"datePublished": "2024-11-04 00:00:00 \u002b0000 UTC",
"dateModified" : "2024-11-04 00:00:00 \u002b0000 UTC",
"url" : "http:\/\/halo.rebotgpt.top\/blog\/13.html\/",
"keywords" : [ "MQ", ]
}
</script><title>rocketmq源码编译记录 - halo的博客</title>
<meta property="og:title" content="rocketmq源码编译记录" />
<meta property="og:type" content="article" />
<meta property="og:description" content="前置准备工具 JDK1.8&#43; Maven 3.2&#43; 编译工具idea 1.获取源码并导入idea git clone https://github.com/apache/rocketmq.git 2.文件修改 2.1.在根目录下创建目录conf 2.2.将项目中distribution工程中的conf目录下的文件broker.conf复制到根目录下conf中 2.3.修改内容，如 brokerClusterName = DefaultCluster brokerName = broker-a brokerId = 0 deleteWhen = 04 fileReservedTime = 48 brokerRole = ASYNC_MASTER flushDiskType = ASYNC_FLUSH # 自动创建Topic autoCreateTopicEnable=true # nameServ地址 namesrvAddr=localhost:9876 # 存储路径 storePathRootDir=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store #CommitLog存储路径 storePathCommitLog=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/commitlog # 消费队列存储路径 storePathConsumeQueue=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/consumequeue # 消息索引存储路径 storePathIndex=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/index #checkpoint文件存储路径 storeCheckpoint/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/checkpoint #abort文件存储路径 abortFile=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/abort 3.编译,运行以下命令 mvn clean install -Dmaven.test.skip=true 等待命令执行完成。
4.编译安装完成后，观察项目各种jar包是否正确导入 若有包未正确导入，可从本地删掉该jar，刷新maven重新下载
5.执行org.apache.rocketmq.namesrv.NamesrvStartup 5.1增加启动配置 ROCKETMQ_HOME=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq 若还报错
Please set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在NamesrvStartup.java中main方法第一行增加
System.setProperty(&#34;rocketmq.home.dir&#34;, &#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;); 5.2执行成功 The Name Server boot success. serializeType=JSON, address 0.0.0.0:9876 6.执行org.apache.rocketmq.broker.BrokerStartup 6.1增加启动配置 ROCKETMQ_HOME=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq 若还报错
Please set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在BrokerStartup.java中main方法第一行增加
System.setProperty(&#34;rocketmq.home.dir&#34;, &#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;); 6.2执行成功 The broker[broker-a, 172.17.54.155:10911] boot success. serializeType=JSON and name server is localhost:9876 7.执行org.apache.rocketmq.example.quickstart.Producer 7.1 先修改Producer前将该注释打开 producer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 7.2 运行main方法,执行成功会有以下输出 SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C803DE, offsetMsgId=AC11369B00002A9F00000000000B0752, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=746] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903DF, offsetMsgId=AC11369B00002A9F00000000000B0844, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E0, offsetMsgId=AC11369B00002A9F00000000000B0936, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E1, offsetMsgId=AC11369B00002A9F00000000000B0A28, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E2, offsetMsgId=AC11369B00002A9F00000000000B0B1A, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E3, offsetMsgId=AC11369B00002A9F00000000000B0C0C, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E4, offsetMsgId=AC11369B00002A9F00000000000B0CFE, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=749] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E5, offsetMsgId=AC11369B00002A9F00000000000B0DF0, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E6, offsetMsgId=AC11369B00002A9F00000000000B0EE2, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CC03E7, offsetMsgId=AC11369B00002A9F00000000000B0FD4, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=749] 8.执行org.apache.rocketmq.example.quickstart.Consumer 8.1 先修改Consumer类前将该注释打开 consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 8.2 运行main方法,执行成功会有以下输出 ConsumeMessageThread_please_rename_unique_group_name_4_16 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=490, sysFlag=0, bornTimestamp=1709025389853, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389853, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000073BF8, commitLogOffset=474104, bodyCRC=910391900, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491D03C0, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 54, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_13 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=485, sysFlag=0, bornTimestamp=1709025389842, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389842, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000072910, commitLogOffset=469264, bodyCRC=74782942, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491203AC, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 52, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_3 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=481, sysFlag=0, bornTimestamp=1709025389831, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389832, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F00000000000719F0, commitLogOffset=465392, bodyCRC=1430420289, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A4907039C, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 54], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_20 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=480, sysFlag=0, bornTimestamp=1709025389825, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389825, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000071628, commitLogOffset=464424, bodyCRC=1378860888, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A49010398, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_15 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=476, sysFlag=0, bornTimestamp=1709025389807, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389807, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070708, commitLogOffset=460552, bodyCRC=1735662019, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EF0388, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 54], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_14 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=475, sysFlag=0, bornTimestamp=1709025389803, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389803, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070340, commitLogOffset=459584, bodyCRC=1612307930, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EB0384, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_6 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=474, sysFlag=0, bornTimestamp=1709025389775, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389780, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F000000000006FF78, commitLogOffset=458616, bodyCRC=1355605434, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48CF0380, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 56, 57, 56], transactionId=&#39;null&#39;}]] 9.编译完成，接下来就可以愉快的调试源码了！ 注：上面提到的目录需要根据本地环境调整！！！" />
<meta name="description" content="前置准备工具 JDK1.8&#43; Maven 3.2&#43; 编译工具idea 1.获取源码并导入idea git clone https://github.com/apache/rocketmq.git 2.文件修改 2.1.在根目录下创建目录conf 2.2.将项目中distribution工程中的conf目录下的文件broker.conf复制到根目录下conf中 2.3.修改内容，如 brokerClusterName = DefaultCluster brokerName = broker-a brokerId = 0 deleteWhen = 04 fileReservedTime = 48 brokerRole = ASYNC_MASTER flushDiskType = ASYNC_FLUSH # 自动创建Topic autoCreateTopicEnable=true # nameServ地址 namesrvAddr=localhost:9876 # 存储路径 storePathRootDir=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store #CommitLog存储路径 storePathCommitLog=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/commitlog # 消费队列存储路径 storePathConsumeQueue=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/consumequeue # 消息索引存储路径 storePathIndex=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/index #checkpoint文件存储路径 storeCheckpoint/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/checkpoint #abort文件存储路径 abortFile=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/abort 3.编译,运行以下命令 mvn clean install -Dmaven.test.skip=true 等待命令执行完成。
4.编译安装完成后，观察项目各种jar包是否正确导入 若有包未正确导入，可从本地删掉该jar，刷新maven重新下载
5.执行org.apache.rocketmq.namesrv.NamesrvStartup 5.1增加启动配置 ROCKETMQ_HOME=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq 若还报错
Please set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在NamesrvStartup.java中main方法第一行增加
System.setProperty(&#34;rocketmq.home.dir&#34;, &#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;); 5.2执行成功 The Name Server boot success. serializeType=JSON, address 0.0.0.0:9876 6.执行org.apache.rocketmq.broker.BrokerStartup 6.1增加启动配置 ROCKETMQ_HOME=/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq 若还报错
Please set the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation 则在BrokerStartup.java中main方法第一行增加
System.setProperty(&#34;rocketmq.home.dir&#34;, &#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;); 6.2执行成功 The broker[broker-a, 172.17.54.155:10911] boot success. serializeType=JSON and name server is localhost:9876 7.执行org.apache.rocketmq.example.quickstart.Producer 7.1 先修改Producer前将该注释打开 producer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 7.2 运行main方法,执行成功会有以下输出 SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C803DE, offsetMsgId=AC11369B00002A9F00000000000B0752, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=746] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903DF, offsetMsgId=AC11369B00002A9F00000000000B0844, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E0, offsetMsgId=AC11369B00002A9F00000000000B0936, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398C903E1, offsetMsgId=AC11369B00002A9F00000000000B0A28, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E2, offsetMsgId=AC11369B00002A9F00000000000B0B1A, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=747] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E3, offsetMsgId=AC11369B00002A9F00000000000B0C0C, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CA03E4, offsetMsgId=AC11369B00002A9F00000000000B0CFE, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=2], queueOffset=749] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E5, offsetMsgId=AC11369B00002A9F00000000000B0DF0, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=3], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CB03E6, offsetMsgId=AC11369B00002A9F00000000000B0EE2, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=0], queueOffset=748] SendResult [sendStatus=SEND_OK, msgId=AC1FD12A13DE18B4AAC289B398CC03E7, offsetMsgId=AC11369B00002A9F00000000000B0FD4, messageQueue=MessageQueue [topic=TopicTest, brokerName=broker-a, queueId=1], queueOffset=749] 8.执行org.apache.rocketmq.example.quickstart.Consumer 8.1 先修改Consumer类前将该注释打开 consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR); 8.2 运行main方法,执行成功会有以下输出 ConsumeMessageThread_please_rename_unique_group_name_4_16 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=490, sysFlag=0, bornTimestamp=1709025389853, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389853, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000073BF8, commitLogOffset=474104, bodyCRC=910391900, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491D03C0, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 54, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_13 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=485, sysFlag=0, bornTimestamp=1709025389842, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389842, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000072910, commitLogOffset=469264, bodyCRC=74782942, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A491203AC, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 52, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_3 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=481, sysFlag=0, bornTimestamp=1709025389831, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389832, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F00000000000719F0, commitLogOffset=465392, bodyCRC=1430420289, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A4907039C, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 54], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_20 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=480, sysFlag=0, bornTimestamp=1709025389825, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389825, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000071628, commitLogOffset=464424, bodyCRC=1378860888, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A49010398, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_15 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=476, sysFlag=0, bornTimestamp=1709025389807, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389807, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070708, commitLogOffset=460552, bodyCRC=1735662019, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EF0388, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 54], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_14 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=475, sysFlag=0, bornTimestamp=1709025389803, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389803, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F0000000000070340, commitLogOffset=459584, bodyCRC=1612307930, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48EB0384, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 50], transactionId=&#39;null&#39;}]] ConsumeMessageThread_please_rename_unique_group_name_4_6 Receive New Messages: [MessageExt [brokerName=broker-a, queueId=1, storeSize=242, queueOffset=474, sysFlag=0, bornTimestamp=1709025389775, bornHost=/172.17.54.155:56940, storeTimestamp=1709025389780, storeHost=/172.17.54.155:10911, msgId=AC11369B00002A9F000000000006FF78, commitLogOffset=458616, bodyCRC=1355605434, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message{topic=&#39;TopicTest&#39;, flag=0, properties={CONSUME_START_TIME=1709025398791, MSG_REGION=DefaultRegion, UNIQ_KEY=AC1FD12AC78018B4AAC2899A48CF0380, CLUSTER=DefaultCluster, MIN_OFFSET=0, TAGS=TagA, WAIT=true, TRACE_ON=true, MAX_OFFSET=500}, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 56, 57, 56], transactionId=&#39;null&#39;}]] 9.编译完成，接下来就可以愉快的调试源码了！ 注：上面提到的目录需要根据本地环境调整！！！" />
<meta property="og:locale" content="en-us" /><meta property="og:image" content="https://raw.githubusercontent.com/yangdinghui/Code-Guide/master/pic/icons-cat.gif" />


<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/index.css">
<link href="/index.xml" rel="alternate" type="application/rss+xml" title="halo的博客">
</head>

<body>
  <nav class="headnav">
  <a href="http://halo.rebotgpt.top" class="logo">HALO</a>
  <ul id="menu">
    
    <li><a href="/message/">留言</a></li>
    
    <li><a href="/search">搜索</a></li>
    
    <li><a href="/index.xml" target="_blank">RSS</a></li>
  </ul>
</nav>
  <section>
    
    <div class="body-title">rocketmq源码编译记录</div>

    
    <div class="post-meta">
      <time> 2024-11-04</time>
      
      
      <span class="namenode">分类：
        <a href="/categories/%E6%8A%80%E6%9C%AF">技术</a>
      </span>
      
      

      <span class="tag-node">
        
        标签：
        
        <a href="/tags/mq">#MQ</a>
        
        
      </span>

    </div>
    

    
    <div class="toc">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#前置准备工具">前置准备工具</a></li>
        <li><a href="#1获取源码并导入idea">1.获取源码并导入idea</a></li>
        <li><a href="#2文件修改">2.文件修改</a></li>
        <li><a href="#3编译运行以下命令">3.编译,运行以下命令</a></li>
        <li><a href="#4编译安装完成后观察项目各种jar包是否正确导入">4.编译安装完成后，观察项目各种jar包是否正确导入</a></li>
        <li><a href="#5执行orgapacherocketmqnamesrvnamesrvstartup">5.执行org.apache.rocketmq.namesrv.NamesrvStartup</a></li>
        <li><a href="#6执行orgapacherocketmqbrokerbrokerstartup">6.执行org.apache.rocketmq.broker.BrokerStartup</a></li>
        <li><a href="#7执行orgapacherocketmqexamplequickstartproducer">7.执行org.apache.rocketmq.example.quickstart.Producer</a></li>
        <li><a href="#8执行orgapacherocketmqexamplequickstartconsumer">8.执行org.apache.rocketmq.example.quickstart.Consumer</a></li>
        <li><a href="#9编译完成接下来就可以愉快的调试源码了">9.编译完成，接下来就可以愉快的调试源码了！</a></li>
        <li><a href="#注上面提到的目录需要根据本地环境调整">注：上面提到的目录需要根据本地环境调整！！！</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <article class="post-content">
      
      <h3 id="前置准备工具">前置准备工具</h3>
<ul>
<li>JDK1.8+</li>
<li>Maven 3.2+</li>
<li>编译工具idea</li>
</ul>
<h3 id="1获取源码并导入idea">1.获取源码并导入idea</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/apache/rocketmq.git
</span></span></code></pre></div><h3 id="2文件修改">2.文件修改</h3>
<h4 id="21在根目录下创建目录conf">2.1.在根目录下创建目录conf</h4>
<h4 id="22将项目中distribution工程中的conf目录下的文件brokerconf复制到根目录下conf中">2.2.将项目中distribution工程中的conf目录下的文件broker.conf复制到根目录下conf中</h4>
<h4 id="23修改内容如">2.3.修改内容，如</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">brokerClusterName</span> <span class="o">=</span> DefaultCluster
</span></span><span class="line"><span class="cl"><span class="nv">brokerName</span> <span class="o">=</span> broker-a
</span></span><span class="line"><span class="cl"><span class="nv">brokerId</span> <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="nv">deleteWhen</span> <span class="o">=</span> <span class="m">04</span>
</span></span><span class="line"><span class="cl"><span class="nv">fileReservedTime</span> <span class="o">=</span> <span class="m">48</span>
</span></span><span class="line"><span class="cl"><span class="nv">brokerRole</span> <span class="o">=</span> ASYNC_MASTER
</span></span><span class="line"><span class="cl"><span class="nv">flushDiskType</span> <span class="o">=</span> ASYNC_FLUSH
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 自动创建Topic</span>
</span></span><span class="line"><span class="cl"><span class="nv">autoCreateTopicEnable</span><span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="c1"># nameServ地址</span>
</span></span><span class="line"><span class="cl"><span class="nv">namesrvAddr</span><span class="o">=</span>localhost:9876
</span></span><span class="line"><span class="cl"><span class="c1"># 存储路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">storePathRootDir</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store
</span></span><span class="line"><span class="cl"><span class="c1">#CommitLog存储路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">storePathCommitLog</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/commitlog
</span></span><span class="line"><span class="cl"><span class="c1"># 消费队列存储路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">storePathConsumeQueue</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/consumequeue
</span></span><span class="line"><span class="cl"><span class="c1"># 消息索引存储路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">storePathIndex</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/index
</span></span><span class="line"><span class="cl"><span class="c1">#checkpoint文件存储路径</span>
</span></span><span class="line"><span class="cl">storeCheckpoint/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/checkpoint
</span></span><span class="line"><span class="cl"><span class="c1">#abort文件存储路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">abortFile</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq/store/abort
</span></span></code></pre></div><h3 id="3编译运行以下命令">3.编译,运行以下命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mvn clean install -Dmaven.test.skip<span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></div><p>等待命令执行完成。</p>
<h3 id="4编译安装完成后观察项目各种jar包是否正确导入">4.编译安装完成后，观察项目各种jar包是否正确导入</h3>
<p>若有包未正确导入，可从本地删掉该jar，刷新maven重新下载</p>
<h3 id="5执行orgapacherocketmqnamesrvnamesrvstartup">5.执行org.apache.rocketmq.namesrv.NamesrvStartup</h3>
<h4 id="51增加启动配置">5.1增加启动配置</h4>
<p><img src="https://img.rebotgpt.top/2024/11/d4eb7c5b8248a54826810d172478c52c.jpg" alt="NamesrvStartup启动配置"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">ROCKETMQ_HOME</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq
</span></span></code></pre></div><p>若还报错</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Please <span class="nb">set</span> the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation
</span></span></code></pre></div><p>则在NamesrvStartup.java中main方法第一行增加</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&#34;rocketmq.home.dir&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h4 id="52执行成功">5.2执行成功</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">The Name Server boot success. <span class="nv">serializeType</span><span class="o">=</span>JSON, address 0.0.0.0:9876
</span></span></code></pre></div><h3 id="6执行orgapacherocketmqbrokerbrokerstartup">6.执行org.apache.rocketmq.broker.BrokerStartup</h3>
<h4 id="61增加启动配置">6.1增加启动配置</h4>
<p><img src="https://img.rebotgpt.top/2024/11/ae365ef14b9c6c2738ebac7ec8625aad.jpg" alt="BrokerStartup启动配置"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">ROCKETMQ_HOME</span><span class="o">=</span>/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq
</span></span></code></pre></div><p>若还报错</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Please <span class="nb">set</span> the ROCKETMQ_HOME variable in your environment to match the location of the RocketMQ installation
</span></span></code></pre></div><p>则在BrokerStartup.java中main方法第一行增加</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&#34;rocketmq.home.dir&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;/Users/tomato/IdeaProjects/learn/sourcecode/rocketmq&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h4 id="62执行成功">6.2执行成功</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">The broker<span class="o">[</span>broker-a, 172.17.54.155:10911<span class="o">]</span> boot success. <span class="nv">serializeType</span><span class="o">=</span>JSON and name server is localhost:9876
</span></span></code></pre></div><h3 id="7执行orgapacherocketmqexamplequickstartproducer">7.执行org.apache.rocketmq.example.quickstart.Producer</h3>
<h4 id="71-先修改producer前将该注释打开">7.1 先修改Producer前将该注释打开</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">producer</span><span class="p">.</span><span class="na">setNamesrvAddr</span><span class="p">(</span><span class="n">DEFAULT_NAMESRVADDR</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h4 id="72-运行main方法执行成功会有以下输出">7.2 运行main方法,执行成功会有以下输出</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398C803DE, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0752, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>0<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>746<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398C903DF, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0844, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>747<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398C903E0, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0936, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>2<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>748<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398C903E1, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0A28, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>3<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>747<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CA03E2, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0B1A, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>0<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>747<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CA03E3, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0C0C, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>748<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CA03E4, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0CFE, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>2<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>749<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CB03E5, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0DF0, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>3<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>748<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CB03E6, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0EE2, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>0<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>748<span class="o">]</span>
</span></span><span class="line"><span class="cl">SendResult <span class="o">[</span><span class="nv">sendStatus</span><span class="o">=</span>SEND_OK, <span class="nv">msgId</span><span class="o">=</span>AC1FD12A13DE18B4AAC289B398CC03E7, <span class="nv">offsetMsgId</span><span class="o">=</span>AC11369B00002A9F00000000000B0FD4, <span class="nv">messageQueue</span><span class="o">=</span>MessageQueue <span class="o">[</span><span class="nv">topic</span><span class="o">=</span>TopicTest, <span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1<span class="o">]</span>, <span class="nv">queueOffset</span><span class="o">=</span>749<span class="o">]</span>
</span></span></code></pre></div><h3 id="8执行orgapacherocketmqexamplequickstartconsumer">8.执行org.apache.rocketmq.example.quickstart.Consumer</h3>
<h4 id="81-先修改consumer类前将该注释打开">8.1 先修改Consumer类前将该注释打开</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">consumer</span><span class="p">.</span><span class="na">setNamesrvAddr</span><span class="p">(</span><span class="n">DEFAULT_NAMESRVADDR</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h4 id="82-运行main方法执行成功会有以下输出">8.2 运行main方法,执行成功会有以下输出</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_16 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>490, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389853, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389853, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F0000000000073BF8, <span class="nv">commitLogOffset</span><span class="o">=</span>474104, <span class="nv">bodyCRC</span><span class="o">=</span>910391900, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A491D03C0, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 54, 50<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_13 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>485, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389842, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389842, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F0000000000072910, <span class="nv">commitLogOffset</span><span class="o">=</span>469264, <span class="nv">bodyCRC</span><span class="o">=</span>74782942, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A491203AC, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 52, 50<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_3 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>481, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389831, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389832, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F00000000000719F0, <span class="nv">commitLogOffset</span><span class="o">=</span>465392, <span class="nv">bodyCRC</span><span class="o">=</span>1430420289, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A4907039C, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 54<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_20 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>480, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389825, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389825, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F0000000000071628, <span class="nv">commitLogOffset</span><span class="o">=</span>464424, <span class="nv">bodyCRC</span><span class="o">=</span>1378860888, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A49010398, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 50, 50<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_15 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>476, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389807, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389807, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F0000000000070708, <span class="nv">commitLogOffset</span><span class="o">=</span>460552, <span class="nv">bodyCRC</span><span class="o">=</span>1735662019, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A48EF0388, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 54<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_14 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>475, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389803, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389803, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F0000000000070340, <span class="nv">commitLogOffset</span><span class="o">=</span>459584, <span class="nv">bodyCRC</span><span class="o">=</span>1612307930, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A48EB0384, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 57, 48, 50<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span><span class="line"><span class="cl">ConsumeMessageThread_please_rename_unique_group_name_4_6 Receive New Messages: <span class="o">[</span>MessageExt <span class="o">[</span><span class="nv">brokerName</span><span class="o">=</span>broker-a, <span class="nv">queueId</span><span class="o">=</span>1, <span class="nv">storeSize</span><span class="o">=</span>242, <span class="nv">queueOffset</span><span class="o">=</span>474, <span class="nv">sysFlag</span><span class="o">=</span>0, <span class="nv">bornTimestamp</span><span class="o">=</span>1709025389775, <span class="nv">bornHost</span><span class="o">=</span>/172.17.54.155:56940, <span class="nv">storeTimestamp</span><span class="o">=</span>1709025389780, <span class="nv">storeHost</span><span class="o">=</span>/172.17.54.155:10911, <span class="nv">msgId</span><span class="o">=</span>AC11369B00002A9F000000000006FF78, <span class="nv">commitLogOffset</span><span class="o">=</span>458616, <span class="nv">bodyCRC</span><span class="o">=</span>1355605434, <span class="nv">reconsumeTimes</span><span class="o">=</span>0, <span class="nv">preparedTransactionOffset</span><span class="o">=</span>0, toString<span class="o">()=</span>Message<span class="o">{</span><span class="nv">topic</span><span class="o">=</span><span class="s1">&#39;TopicTest&#39;</span>, <span class="nv">flag</span><span class="o">=</span>0, <span class="nv">properties</span><span class="o">={</span><span class="nv">CONSUME_START_TIME</span><span class="o">=</span>1709025398791, <span class="nv">MSG_REGION</span><span class="o">=</span>DefaultRegion, <span class="nv">UNIQ_KEY</span><span class="o">=</span>AC1FD12AC78018B4AAC2899A48CF0380, <span class="nv">CLUSTER</span><span class="o">=</span>DefaultCluster, <span class="nv">MIN_OFFSET</span><span class="o">=</span>0, <span class="nv">TAGS</span><span class="o">=</span>TagA, <span class="nv">WAIT</span><span class="o">=</span>true, <span class="nv">TRACE_ON</span><span class="o">=</span>true, <span class="nv">MAX_OFFSET</span><span class="o">=</span>500<span class="o">}</span>, <span class="nv">body</span><span class="o">=[</span>72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 56, 57, 56<span class="o">]</span>, <span class="nv">transactionId</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="o">}]]</span>
</span></span></code></pre></div><h3 id="9编译完成接下来就可以愉快的调试源码了">9.编译完成，接下来就可以愉快的调试源码了！</h3>
<h3 id="注上面提到的目录需要根据本地环境调整">注：上面提到的目录需要根据本地环境调整！！！</h3>

    </article>

    
    <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'halo8';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
  </section>
  <footer class="footer">
  <p>© 2020 - 2024 Powered by
    <a href="https://github.com/yangdinghui" target="_blank">Github</a>
    / <a href="/index.xml" target="_blank">RSS</a>
  </p>
</footer>


</body>

</html>